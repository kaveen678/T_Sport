<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clean HLS Player (No Seek Back)</title>
    
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script> 

    <style>
        /* Center the body with a black background */
        body {
            background-color: #000;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            flex-direction: column; 
        }

        /* Video container */
        .player-container {
            position: relative;
            width: 900px; /* Set maximum width */
            max-width: 95%; 
            margin: auto;
        }

        /* Video tag: controls attribute kept as is */
        .video-window {
            width: 100%;
            display: block;
            aspect-ratio: 16 / 9; 
            background: #111;
        }
        
        /* New style for the footer text */
        .footer-text {
            color: #aaa; /* Light gray color for visibility */
            margin-top: 10px; /* Space above the text */
            font-family: Arial, sans-serif;
            font-size: 14px;
        }
    </style>
</head>
<body>

    <div class="player-container">
        <video id="liveVideoPlayer" class="video-window" controls autoplay muted playsinline>
            
        </video>
    </div>
    
    <div class="footer-text">
        Powered by Kaveen Chamodya | 
                          All Right Reserved 2025 |

Contact Us : kaveenchamodya08@gmail.com

    </div>

    <script>
        // Use HTTPS protocol for the video stream to avoid Mixed Content error if hosted via HTTPS
        const videoUrl ='https://tvsen1.aynaott.com/YNMn5kZz8aLm/index.m3u8';
        const video = document.getElementById('liveVideoPlayer');
        let lastKnownTime = 0; // To store the last valid time for native playback

        // Load video via HLS.js
        if (Hls.isSupported()) {
            var hls = new Hls();
            
            hls.loadSource(videoUrl);
            hls.attachMedia(video);
            
            hls.on(Hls.Events.MANIFEST_PARSED, function() {
                video.play().catch(error => {
                    console.warn("Autoplay was prevented by the browser. User must click to play.", error);
                });
            });
            
            // ==========================================================
            // Code to prevent seeking backward (for HLS.js)
            // ==========================================================
            video.addEventListener('seeking', function() {
                // If the seek position is behind the live edge, reset to the live edge
                if (hls.currentLevel !== -1 && video.duration !== Infinity) { 
                    if (video.currentTime < hls.liveSyncPosition) {
                        video.currentTime = hls.liveSyncPosition;
                    }
                }
            });
            
        } else if (video.canPlayType('application/vnd.apple.mpegurl')) {
            // For browsers supporting native HLS (like Safari)
            video.src = videoUrl;
            video.addEventListener('loadedmetadata', function() {
                video.play();
                lastKnownTime = video.currentTime; // Set initial time
            });
            
            // ==========================================================
            // Code to prevent seeking backward (for native playback)
            // ==========================================================
             video.addEventListener('timeupdate', function() {
                // Store the current time if it's a valid forward play
                if (video.currentTime > lastKnownTime) {
                    lastKnownTime = video.currentTime;
                }
            });

            video.addEventListener('seeking', function() {
                // If attempting to seek back further than the last known valid time
                if (video.currentTime < lastKnownTime) { 
                    video.currentTime = lastKnownTime; 
                }
                
                // If it's a live stream, try to keep it close to the current time.
                if (video.duration === Infinity) { 
                    // Set to the end of the buffered range to stay near 'Live'
                    const buffered = video.buffered;
                    if (buffered.length > 0) {
                        video.currentTime = buffered.end(buffered.length - 1);
                    }
                }
            });
            
        } else {
            console.error("HLS is not supported by this browser.");
        }
    </script>
</body>
</html>